<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Authors on Topic – {{ terms | join(", ") }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <style>
    :root { --bg:#0b1020; --card:#121a35; --muted:#aab3c5; --text:#e9eef9; --accent:#8bb3ff; }
    html, body { margin:0; padding:0; background:var(--bg); color:var(--text); font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif; }
    .wrap { max-width:1100px; margin:0 auto; padding:24px; }
    h1 { font-size:1.8rem; margin:0 0 6px; }
    .sub { color:var(--muted); margin:0 0 24px; }
    .pill { display:inline-block; padding:2px 10px; margin:2px 6px 2px 0; border-radius:999px; background:rgba(255,255,255,0.06); color:var(--accent); font-size:0.9rem; }
    .grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(500px, 1fr)); gap:16px; }
    .card { background:var(--card); border:1px solid rgba(255,255,255,0.07); border-radius:14px; padding:16px 16px 8px; box-shadow: 0 6px 18px rgba(0,0,0,0.25); }
    .card h2 { font-size:1.1rem; margin:0 0 6px; }
    .meta { color:var(--muted); font-size:0.92rem; margin-bottom:8px; }
    .count { font-weight:600; color:var(--accent); }
    details { margin:8px 0 10px; }
    summary { cursor:pointer; color:var(--accent); }
    ul { padding-left:18px; margin:8px 0 0; }
    a { color:var(--accent); text-decoration: none; }
    a:hover { text-decoration: underline; }
    .affline { margin:2px 0; }
    .muted { color:var(--muted); }
    .footer { margin-top:28px; color:var(--muted); font-size:0.9rem; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Authors on topic</h1>
    <p class="sub">
      Terms:
      {% for t in terms %}<span class="pill">{{ t }}</span>{% endfor %}
      · {{ matched_authors_count }} authors · {{ matched_papers_count }} papers
    </p>

    <div class="grid">
      {% for a in authors %}
      <div class="card">
        <h2>
          {% if a.profile_url %}
            <a href="{{ a.profile_url }}" target="_blank" rel="noopener">{{ a.name }}</a>
          {% else %}
            {{ a.name }}
          {% endif %}
        </h2>

          {% set past = [] %}
          {% for h in a.history %}
            {% set inst = h.institution or {} %}
            <div class="affline muted">
              {{ h.start or '—' }}–{{ h.end or 'present' }}:
              {{ h.position or '—' }}
              {% if h.department %}, {{ h.department }}{% endif %}
              {% if inst.name %}, {{ inst.name }}{% endif %}
              {% if inst.country %} ({{ inst.country }}){% endif %}
            </div>
          {% endfor %}

        <div>
          <strong>Papers</strong> (<span class="count">{{ a.paper_count }}</span>)
          <ul>
            {% for p in a.papers %}
              <li>
                {% if p.forum %}
                  <a href="https://openreview.net/forum?id={{ p.forum }}" target="_blank" rel="noopener">{{ p.title }}</a>
                {% else %}
                  {{ p.title }}
                {% endif %}
                {% if p.venue %} — <span class="muted">{{ p.venue }}</span>{% endif %}
              </li>
            {% endfor %}
          </ul>
        </div>
      </div>
      {% endfor %}
    </div>

    <div class="footer">
      Generated by Jinja2 · OpenReview data (local JSON).
    </div>
  </div>
</body>
</html>
